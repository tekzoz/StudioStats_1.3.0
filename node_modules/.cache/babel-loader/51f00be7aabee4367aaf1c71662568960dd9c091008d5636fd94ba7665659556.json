{"ast":null,"code":"var _jsxFileName = \"/Users/marcoaugustocomba/Documents/GitHub/StudioStats_1.2/src/PerformanceTrendView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { getYearlyData, getCurrentYearAndMonth, getAvailableYears } from './data';\n\n// Styled components\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ViewContainer = styled.div`\n  background-color: #F0F9FF;\n  min-height: 100vh;\n  padding: 24px;\n  font-family: 'Helvetica Neue', Arial, sans-serif;\n`;\n_c = ViewContainer;\nconst ViewContent = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n_c2 = ViewContent;\nconst ViewTitle = styled.h1`\n  font-size: 32px;\n  font-weight: bold;\n  text-align: center;\n  margin-bottom: 32px;\n  color: #1F2937;\n`;\n_c3 = ViewTitle;\nconst ChartContainer = styled.div`\n  background-color: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  padding: 24px;\n  margin-bottom: 24px;\n`;\n_c4 = ChartContainer;\nconst AnalysisSection = styled.div`\n  background-color: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  padding: 24px;\n  margin-bottom: 24px;\n`;\n_c5 = AnalysisSection;\nconst AnalysisTitle = styled.h2`\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 16px;\n  color: #1F2937;\n`;\n_c6 = AnalysisTitle;\nconst AnalysisText = styled.p`\n  font-size: 16px;\n  line-height: 1.5;\n  color: #4B5563;\n  white-space: pre-line;\n`;\n_c7 = AnalysisText;\nconst LegendContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin-top: 20px;\n`;\n_c8 = LegendContainer;\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n  margin-right: 20px;\n  margin-bottom: 10px;\n`;\n_c9 = LegendItem;\nconst LegendColor = styled.div`\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  margin-right: 8px;\n  background-color: ${props => props.color};\n`;\n_c10 = LegendColor;\nconst BackButton = styled.button`\n  background-color: #3B82F6;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: 12px 24px;\n  font-size: 16px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: #2563EB;\n  }\n`;\n\n// Helper functions\n_c11 = BackButton;\nconst getMonthName = monthNumber => {\n  const monthNames = ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno', 'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'];\n  return monthNames[monthNumber - 1];\n};\nconst formatNumber = num => new Intl.NumberFormat('it-IT').format(Math.round(num));\nconst generateColorPalette = numColors => {\n  const hueStep = 360 / numColors;\n  return Array.from({\n    length: numColors\n  }, (_, i) => `hsl(${i * hueStep}, 70%, 50%)`);\n};\nconst PerformanceTrendView = ({\n  setView\n}) => {\n  _s();\n  const [allYearsData, setAllYearsData] = useState({});\n  const [yearConclusions, setYearConclusions] = useState('');\n  const [prediction, setPrediction] = useState('');\n  const availableYears = useMemo(() => getAvailableYears().map(y => parseInt(y.value)), []);\n  const colorPalette = useMemo(() => generateColorPalette(availableYears.length), [availableYears]);\n  const {\n    currentYear,\n    currentMonth\n  } = getCurrentYearAndMonth();\n  const generateYearConclusions = useCallback((year, currentMonth, yearData, allYearsData) => {\n    const month = currentMonth > 1 ? currentMonth - 1 : 12;\n    const yearToAnalyze = month === 12 ? year - 1 : year;\n    const currentYearData = yearData[yearToAnalyze] || {};\n    const totalTurni = Object.values(currentYearData).slice(0, month).reduce((sum, monthData) => sum + (monthData.totaleTurni || 0), 0);\n    const monthsWithData = Object.values(currentYearData).slice(0, month).filter(monthData => monthData && monthData.totaleTurni > 0).length;\n    const averageMonthlyTurni = monthsWithData > 0 ? totalTurni / monthsWithData : 0;\n    const lastYear = yearToAnalyze - 1;\n    const lastYearData = allYearsData[lastYear] || {};\n    const lastYearTotalTurni = Object.values(lastYearData).slice(0, month).reduce((sum, monthData) => sum + (monthData.totaleTurni || 0), 0);\n    const percentageChange = lastYearTotalTurni > 0 ? (totalTurni - lastYearTotalTurni) / lastYearTotalTurni * 100 : 0;\n    const monthsData = Object.entries(currentYearData).slice(0, month).map(([monthIndex, data]) => ({\n      month: parseInt(monthIndex) + 1,\n      turni: data.totaleTurni || 0\n    }));\n    const maxMonth = monthsData.reduce((max, current) => current.turni > max.turni ? current : max, {\n      turni: 0\n    });\n    const minMonth = monthsData.reduce((min, current) => current.turni < min.turni && current.turni > 0 ? current : min, {\n      turni: Infinity\n    });\n    let conclusions = `Conclusioni per l'anno ${yearToAnalyze} (fino a ${getMonthName(month)}):\\n\\n`;\n    conclusions += `• Totale turni effettuati: ${formatNumber(totalTurni)}\\n`;\n    conclusions += `• Media mensile: ${formatNumber(averageMonthlyTurni)} turni\\n`;\n    if (percentageChange !== 0) {\n      conclusions += `• Variazione rispetto all'anno precedente: ${percentageChange > 0 ? '+' : ''}${percentageChange.toFixed(2)}%\\n`;\n    }\n    conclusions += `• Mese più intenso: ${getMonthName(maxMonth.month)} con ${formatNumber(maxMonth.turni)} turni\\n`;\n    conclusions += `• Mese meno intenso: ${getMonthName(minMonth.month)} con ${formatNumber(minMonth.turni)} turni\\n\\n`;\n    const trend = monthsData.slice(-3).every((data, index, array) => index === 0 || data.turni >= array[index - 1].turni) ? \"crescente\" : monthsData.slice(-3).every((data, index, array) => index === 0 || data.turni <= array[index - 1].turni) ? \"decrescente\" : \"stabile\";\n    conclusions += `Il trend degli ultimi tre mesi è ${trend}. `;\n    if (month < 12) {\n      const remainingMonths = 12 - month;\n      const projectedTotal = totalTurni + averageMonthlyTurni * remainingMonths;\n      conclusions += `Se il trend attuale continua, si prevede di raggiungere circa ${formatNumber(projectedTotal)} turni entro la fine dell'anno.\\n\\n`;\n    }\n    const previousYearsAverage = Object.entries(allYearsData).filter(([y]) => parseInt(y) < yearToAnalyze).reduce((sum, [_, yearData]) => {\n      const yearTotal = Object.values(yearData).reduce((total, month) => total + (month.totaleTurni || 0), 0);\n      return sum + yearTotal;\n    }, 0) / (Object.keys(allYearsData).length - 1);\n    const comparisonWithAverage = (totalTurni / previousYearsAverage - 1) * 100;\n    conclusions += `Rispetto alla media degli anni precedenti, l'anno corrente sta registrando una ${comparisonWithAverage > 0 ? 'crescita' : 'diminuzione'} del ${Math.abs(comparisonWithAverage).toFixed(2)}% nel numero di turni.`;\n    return conclusions;\n  }, []);\n  const makePrediction = useCallback((year, month, allYearsData) => {\n    const futurePredictions = [];\n    for (let i = month + 1; i <= 12; i++) {\n      let totalTurni = 0;\n      let yearsCount = 0;\n      availableYears.forEach(y => {\n        if (y !== 2020 && y !== year) {\n          const yearData = allYearsData[y];\n          if (yearData && yearData[i - 1] && yearData[i - 1].totaleTurni > 0) {\n            totalTurni += yearData[i - 1].totaleTurni;\n            yearsCount++;\n          }\n        }\n      });\n      if (yearsCount > 0) {\n        const averageTurni = totalTurni / yearsCount;\n        futurePredictions.push(`• ${getMonthName(i)}: ${formatNumber(averageTurni)} turni`);\n      }\n    }\n    return `\n      Previsione per i mesi rimanenti dell'anno ${year}, basata sulla media degli anni precedenti:\n      ${futurePredictions.join('\\n')}\n    `;\n  }, [availableYears]);\n  const formatChartData = useCallback(() => {\n    const chartData = [];\n    const calculateAverageForMonth = month => {\n      const relevantYears = availableYears.filter(year => year !== 2020 && year !== currentYear);\n      const sum = relevantYears.reduce((acc, year) => {\n        const yearData = allYearsData[year];\n        return acc + (yearData && yearData[month] ? yearData[month].totaleTurni : 0);\n      }, 0);\n      return Math.round(sum / relevantYears.length);\n    };\n    for (let month = 0; month < 12; month++) {\n      const monthData = {\n        month: getMonthName(month + 1)\n      };\n      availableYears.forEach(year => {\n        const yearData = allYearsData[year];\n        if (year === currentYear) {\n          if (month < currentMonth) {\n            monthData[year] = yearData && yearData[month] ? Math.round(yearData[month].totaleTurni) : 0;\n          } else {\n            monthData[`${year}Prediction`] = calculateAverageForMonth(month);\n          }\n        } else {\n          monthData[year] = yearData && yearData[month] ? Math.round(yearData[month].totaleTurni) : 0;\n        }\n      });\n      chartData.push(monthData);\n    }\n    return chartData;\n  }, [allYearsData, availableYears, currentYear, currentMonth]);\n  useEffect(() => {\n    const fetchData = async () => {\n      const yearsData = {};\n      for (const year of availableYears) {\n        yearsData[year] = await getYearlyData(year);\n      }\n      setAllYearsData(yearsData);\n      setYearConclusions(generateYearConclusions(currentYear, currentMonth, yearsData, yearsData));\n      setPrediction(makePrediction(currentYear, currentMonth, yearsData));\n    };\n    fetchData();\n  }, [currentYear, currentMonth, availableYears, generateYearConclusions, makePrediction]);\n  const chartData = useMemo(() => formatChartData(), [formatChartData]);\n  return /*#__PURE__*/_jsxDEV(ViewContainer, {\n    children: /*#__PURE__*/_jsxDEV(ViewContent, {\n      children: [/*#__PURE__*/_jsxDEV(ViewTitle, {\n        children: \"Performance Trend\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChartContainer, {\n        children: [/*#__PURE__*/_jsxDEV(AnalysisTitle, {\n          children: \"Trend annuale\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n          width: \"100%\",\n          height: 400,\n          children: /*#__PURE__*/_jsxDEV(LineChart, {\n            data: chartData,\n            children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n              strokeDasharray: \"3 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n              dataKey: \"month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this), availableYears.map((year, index) => {\n              const isCurrentYear = year === currentYear;\n              return /*#__PURE__*/_jsxDEV(React.Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Line, {\n                  type: \"monotone\",\n                  dataKey: year.toString(),\n                  stroke: colorPalette[index],\n                  strokeWidth: isCurrentYear ? 3 : 1,\n                  dot: false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 21\n                }, this), isCurrentYear && /*#__PURE__*/_jsxDEV(Line, {\n                  type: \"monotone\",\n                  dataKey: `${year}Prediction`,\n                  stroke: colorPalette[index],\n                  strokeWidth: 3,\n                  strokeDasharray: \"5 5\",\n                  dot: false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 23\n                }, this)]\n              }, year, true, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LegendContainer, {\n          children: availableYears.map((year, index) => /*#__PURE__*/_jsxDEV(LegendItem, {\n            children: [/*#__PURE__*/_jsxDEV(LegendColor, {\n              color: colorPalette[index]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: year === currentYear ? `${year} / Previsione ${year}` : year\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this)]\n          }, year, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnalysisSection, {\n        children: [/*#__PURE__*/_jsxDEV(AnalysisTitle, {\n          children: \"Conclusioni sull'anno in corso\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AnalysisText, {\n          children: yearConclusions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnalysisSection, {\n        children: [/*#__PURE__*/_jsxDEV(AnalysisTitle, {\n          children: \"Previsione per i prossimi mesi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AnalysisText, {\n          children: prediction\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BackButton, {\n        onClick: () => setView('main'),\n        children: \"Torna alla Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 5\n  }, this);\n};\n_s(PerformanceTrendView, \"ppp5rTxj7bqbzH8PDsrATEmgRQ4=\");\n_c12 = PerformanceTrendView;\nexport default PerformanceTrendView;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12;\n$RefreshReg$(_c, \"ViewContainer\");\n$RefreshReg$(_c2, \"ViewContent\");\n$RefreshReg$(_c3, \"ViewTitle\");\n$RefreshReg$(_c4, \"ChartContainer\");\n$RefreshReg$(_c5, \"AnalysisSection\");\n$RefreshReg$(_c6, \"AnalysisTitle\");\n$RefreshReg$(_c7, \"AnalysisText\");\n$RefreshReg$(_c8, \"LegendContainer\");\n$RefreshReg$(_c9, \"LegendItem\");\n$RefreshReg$(_c10, \"LegendColor\");\n$RefreshReg$(_c11, \"BackButton\");\n$RefreshReg$(_c12, \"PerformanceTrendView\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","styled","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","getYearlyData","getCurrentYearAndMonth","getAvailableYears","jsxDEV","_jsxDEV","ViewContainer","div","_c","ViewContent","_c2","ViewTitle","h1","_c3","ChartContainer","_c4","AnalysisSection","_c5","AnalysisTitle","h2","_c6","AnalysisText","p","_c7","LegendContainer","_c8","LegendItem","_c9","LegendColor","props","color","_c10","BackButton","button","_c11","getMonthName","monthNumber","monthNames","formatNumber","num","Intl","NumberFormat","format","Math","round","generateColorPalette","numColors","hueStep","Array","from","length","_","i","PerformanceTrendView","setView","_s","allYearsData","setAllYearsData","yearConclusions","setYearConclusions","prediction","setPrediction","availableYears","map","y","parseInt","value","colorPalette","currentYear","currentMonth","generateYearConclusions","year","yearData","month","yearToAnalyze","currentYearData","totalTurni","Object","values","slice","reduce","sum","monthData","totaleTurni","monthsWithData","filter","averageMonthlyTurni","lastYear","lastYearData","lastYearTotalTurni","percentageChange","monthsData","entries","monthIndex","data","turni","maxMonth","max","current","minMonth","min","Infinity","conclusions","toFixed","trend","every","index","array","remainingMonths","projectedTotal","previousYearsAverage","yearTotal","total","keys","comparisonWithAverage","abs","makePrediction","futurePredictions","yearsCount","forEach","averageTurni","push","join","formatChartData","chartData","calculateAverageForMonth","relevantYears","acc","fetchData","yearsData","children","fileName","_jsxFileName","lineNumber","columnNumber","width","height","strokeDasharray","dataKey","isCurrentYear","Fragment","type","toString","stroke","strokeWidth","dot","onClick","_c12","$RefreshReg$"],"sources":["/Users/marcoaugustocomba/Documents/GitHub/StudioStats_1.2/src/PerformanceTrendView.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { \n  getYearlyData, \n  getCurrentYearAndMonth,\n  getAvailableYears\n} from './data';\n\n// Styled components\nconst ViewContainer = styled.div`\n  background-color: #F0F9FF;\n  min-height: 100vh;\n  padding: 24px;\n  font-family: 'Helvetica Neue', Arial, sans-serif;\n`;\n\nconst ViewContent = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n\nconst ViewTitle = styled.h1`\n  font-size: 32px;\n  font-weight: bold;\n  text-align: center;\n  margin-bottom: 32px;\n  color: #1F2937;\n`;\n\nconst ChartContainer = styled.div`\n  background-color: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  padding: 24px;\n  margin-bottom: 24px;\n`;\n\nconst AnalysisSection = styled.div`\n  background-color: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  padding: 24px;\n  margin-bottom: 24px;\n`;\n\nconst AnalysisTitle = styled.h2`\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 16px;\n  color: #1F2937;\n`;\n\nconst AnalysisText = styled.p`\n  font-size: 16px;\n  line-height: 1.5;\n  color: #4B5563;\n  white-space: pre-line;\n`;\n\nconst LegendContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin-top: 20px;\n`;\n\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n  margin-right: 20px;\n  margin-bottom: 10px;\n`;\n\nconst LegendColor = styled.div`\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  margin-right: 8px;\n  background-color: ${props => props.color};\n`;\n\nconst BackButton = styled.button`\n  background-color: #3B82F6;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: 12px 24px;\n  font-size: 16px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: #2563EB;\n  }\n`;\n\n// Helper functions\nconst getMonthName = (monthNumber) => {\n  const monthNames = [\n    'Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',\n    'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'\n  ];\n  return monthNames[monthNumber - 1];\n};\n\nconst formatNumber = (num) => new Intl.NumberFormat('it-IT').format(Math.round(num));\n\nconst generateColorPalette = (numColors) => {\n  const hueStep = 360 / numColors;\n  return Array.from({ length: numColors }, (_, i) => \n    `hsl(${i * hueStep}, 70%, 50%)`\n  );\n};\n\nconst PerformanceTrendView = ({ setView }) => {\n  const [allYearsData, setAllYearsData] = useState({});\n  const [yearConclusions, setYearConclusions] = useState('');\n  const [prediction, setPrediction] = useState('');\n\n  const availableYears = useMemo(() => getAvailableYears().map(y => parseInt(y.value)), []);\n  const colorPalette = useMemo(() => generateColorPalette(availableYears.length), [availableYears]);\n  const { currentYear, currentMonth } = getCurrentYearAndMonth();\n\n  const generateYearConclusions = useCallback((year, currentMonth, yearData, allYearsData) => {\n    const month = currentMonth > 1 ? currentMonth - 1 : 12;\n    const yearToAnalyze = month === 12 ? year - 1 : year;\n    const currentYearData = yearData[yearToAnalyze] || {};\n    \n    const totalTurni = Object.values(currentYearData)\n      .slice(0, month)\n      .reduce((sum, monthData) => sum + (monthData.totaleTurni || 0), 0);\n    \n    const monthsWithData = Object.values(currentYearData)\n      .slice(0, month)\n      .filter(monthData => monthData && monthData.totaleTurni > 0).length;\n    \n    const averageMonthlyTurni = monthsWithData > 0 ? totalTurni / monthsWithData : 0;\n\n    const lastYear = yearToAnalyze - 1;\n    const lastYearData = allYearsData[lastYear] || {};\n    const lastYearTotalTurni = Object.values(lastYearData)\n      .slice(0, month)\n      .reduce((sum, monthData) => sum + (monthData.totaleTurni || 0), 0);\n    \n    const percentageChange = lastYearTotalTurni > 0 ? ((totalTurni - lastYearTotalTurni) / lastYearTotalTurni) * 100 : 0;\n\n    const monthsData = Object.entries(currentYearData)\n      .slice(0, month)\n      .map(([monthIndex, data]) => ({ month: parseInt(monthIndex) + 1, turni: data.totaleTurni || 0 }));\n    \n    const maxMonth = monthsData.reduce((max, current) => current.turni > max.turni ? current : max, { turni: 0 });\n    const minMonth = monthsData.reduce((min, current) => (current.turni < min.turni && current.turni > 0) ? current : min, { turni: Infinity });\n\n    let conclusions = `Conclusioni per l'anno ${yearToAnalyze} (fino a ${getMonthName(month)}):\\n\\n`;\n    conclusions += `• Totale turni effettuati: ${formatNumber(totalTurni)}\\n`;\n    conclusions += `• Media mensile: ${formatNumber(averageMonthlyTurni)} turni\\n`;\n    \n    if (percentageChange !== 0) {\n      conclusions += `• Variazione rispetto all'anno precedente: ${percentageChange > 0 ? '+' : ''}${percentageChange.toFixed(2)}%\\n`;\n    }\n\n    conclusions += `• Mese più intenso: ${getMonthName(maxMonth.month)} con ${formatNumber(maxMonth.turni)} turni\\n`;\n    conclusions += `• Mese meno intenso: ${getMonthName(minMonth.month)} con ${formatNumber(minMonth.turni)} turni\\n\\n`;\n\n    const trend = monthsData.slice(-3).every((data, index, array) => \n      index === 0 || data.turni >= array[index - 1].turni\n    ) ? \"crescente\" : monthsData.slice(-3).every((data, index, array) => \n      index === 0 || data.turni <= array[index - 1].turni\n    ) ? \"decrescente\" : \"stabile\";\n\n    conclusions += `Il trend degli ultimi tre mesi è ${trend}. `;\n\n    if (month < 12) {\n      const remainingMonths = 12 - month;\n      const projectedTotal = totalTurni + (averageMonthlyTurni * remainingMonths);\n      conclusions += `Se il trend attuale continua, si prevede di raggiungere circa ${formatNumber(projectedTotal)} turni entro la fine dell'anno.\\n\\n`;\n    }\n\n    const previousYearsAverage = Object.entries(allYearsData)\n      .filter(([y]) => parseInt(y) < yearToAnalyze)\n      .reduce((sum, [_, yearData]) => {\n        const yearTotal = Object.values(yearData).reduce((total, month) => total + (month.totaleTurni || 0), 0);\n        return sum + yearTotal;\n      }, 0) / (Object.keys(allYearsData).length - 1);\n\n    const comparisonWithAverage = ((totalTurni / previousYearsAverage) - 1) * 100;\n\n    conclusions += `Rispetto alla media degli anni precedenti, l'anno corrente sta registrando una ${comparisonWithAverage > 0 ? 'crescita' : 'diminuzione'} del ${Math.abs(comparisonWithAverage).toFixed(2)}% nel numero di turni.`;\n\n    return conclusions;\n  }, []);\n\n  const makePrediction = useCallback((year, month, allYearsData) => {\n    const futurePredictions = [];\n    for (let i = month + 1; i <= 12; i++) {\n      let totalTurni = 0;\n      let yearsCount = 0;\n      availableYears.forEach(y => {\n        if (y !== 2020 && y !== year) {\n          const yearData = allYearsData[y];\n          if (yearData && yearData[i - 1] && yearData[i - 1].totaleTurni > 0) {\n            totalTurni += yearData[i - 1].totaleTurni;\n            yearsCount++;\n          }\n        }\n      });\n      if (yearsCount > 0) {\n        const averageTurni = totalTurni / yearsCount;\n        futurePredictions.push(`• ${getMonthName(i)}: ${formatNumber(averageTurni)} turni`);\n      }\n    }\n\n    return `\n      Previsione per i mesi rimanenti dell'anno ${year}, basata sulla media degli anni precedenti:\n      ${futurePredictions.join('\\n')}\n    `;\n  }, [availableYears]);\n\n  const formatChartData = useCallback(() => {\n    const chartData = [];\n    \n    const calculateAverageForMonth = (month) => {\n      const relevantYears = availableYears.filter(year => year !== 2020 && year !== currentYear);\n      const sum = relevantYears.reduce((acc, year) => {\n        const yearData = allYearsData[year];\n        return acc + (yearData && yearData[month] ? yearData[month].totaleTurni : 0);\n      }, 0);\n      return Math.round(sum / relevantYears.length);\n    };\n\n    for (let month = 0; month < 12; month++) {\n      const monthData = { month: getMonthName(month + 1) };\n      availableYears.forEach(year => {\n        const yearData = allYearsData[year];\n        if (year === currentYear) {\n          if (month < currentMonth) {\n            monthData[year] = yearData && yearData[month] ? Math.round(yearData[month].totaleTurni) : 0;\n          } else {\n            monthData[`${year}Prediction`] = calculateAverageForMonth(month);\n          }\n        } else {\n          monthData[year] = yearData && yearData[month] ? Math.round(yearData[month].totaleTurni) : 0;\n        }\n      });\n      chartData.push(monthData);\n    }\n    return chartData;\n  }, [allYearsData, availableYears, currentYear, currentMonth]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const yearsData = {};\n      for (const year of availableYears) {\n        yearsData[year] = await getYearlyData(year);\n      }\n      setAllYearsData(yearsData);\n\n      setYearConclusions(generateYearConclusions(currentYear, currentMonth, yearsData, yearsData));\n      setPrediction(makePrediction(currentYear, currentMonth, yearsData));\n    };\n\n    fetchData();\n  }, [currentYear, currentMonth, availableYears, generateYearConclusions, makePrediction]);\n\n  const chartData = useMemo(() => formatChartData(), [formatChartData]);\n\n  return (\n    <ViewContainer>\n      <ViewContent>\n        <ViewTitle>Performance Trend</ViewTitle>\n        <ChartContainer>\n          <AnalysisTitle>Trend annuale</AnalysisTitle>\n          <ResponsiveContainer width=\"100%\" height={400}>\n            <LineChart data={chartData}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"month\" />\n              <YAxis />\n              <Tooltip />\n              {availableYears.map((year, index) => {\n                const isCurrentYear = year === currentYear;\n                return (\n                  <React.Fragment key={year}>\n                    <Line\n                      type=\"monotone\"\n                      dataKey={year.toString()}\n                      stroke={colorPalette[index]}\n                      strokeWidth={isCurrentYear ? 3 : 1}\n                      dot={false}\n                    />\n                    {isCurrentYear && (\n                      <Line\n                        type=\"monotone\"\n                        dataKey={`${year}Prediction`}\n                        stroke={colorPalette[index]}\n                        strokeWidth={3}\n                        strokeDasharray=\"5 5\"\n                        dot={false}\n                      />\n                    )}\n                  </React.Fragment>\n                );\n              })}\n            </LineChart>\n          </ResponsiveContainer>\n          <LegendContainer>\n            {availableYears.map((year, index) => (\n              <LegendItem key={year}>\n                <LegendColor color={colorPalette[index]} />\n                <span>{year === currentYear ? `${year} / Previsione ${year}` : year}</span>\n              </LegendItem>\n            ))}\n          </LegendContainer>\n        </ChartContainer>\n        <AnalysisSection>\n          <AnalysisTitle>Conclusioni sull'anno in corso</AnalysisTitle>\n          <AnalysisText>{yearConclusions}</AnalysisText>\n        </AnalysisSection>\n        <AnalysisSection>\n          <AnalysisTitle>Previsione per i prossimi mesi</AnalysisTitle>\n          <AnalysisText>{prediction}</AnalysisText>\n        </AnalysisSection>\n        <BackButton onClick={() => setView('main')}>Torna alla Dashboard</BackButton>\n      </ViewContent>\n    </ViewContainer>\n  );\n};\n\nexport default PerformanceTrendView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}